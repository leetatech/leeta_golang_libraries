<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# migration

```go
import "github.com/leetatech/leeta_golang_libraries/mongodb/migration"
```

## Index

- [type Migration](<#Migration>)
  - [func NewMigration\(client \*mongo.Client, fileToCollection map\[string\]string, dir string\) \*Migration](<#NewMigration>)
  - [func \(m \*Migration\) Up\(ctx context.Context\) error](<#Migration.Up>)


<a name="Migration"></a>
## type [Migration](<https://github.com/leetatech/leeta_golang_libraries/blob/main/mongodb/migration/init.go#L26-L31>)

Migration handles the process of importing JSON data files into MongoDB collections. It maps file names to collection names, manages the MongoDB client connection, specifies the directory containing data files, and holds the target database name.

Fields:

- FileToCollection: A map where the key is the JSON file name and the value is the corresponding MongoDB collection name.
- Client: The MongoDB client used to connect and perform operations on the database.
- DataDir: The directory path where the JSON data files are stored.
- DatabaseName: The name of the MongoDB database where collections reside.

```go
type Migration struct {
    FileToCollection map[string]string
    Client           *mongo.Client
    DataDir          string
    DatabaseName     string
}
```

<a name="NewMigration"></a>
### func [NewMigration](<https://github.com/leetatech/leeta_golang_libraries/blob/main/mongodb/migration/init.go#L34>)

```go
func NewMigration(client *mongo.Client, fileToCollection map[string]string, dir string) *Migration
```

NewMigration creates a new Migration instance.

<a name="Migration.Up"></a>
### func \(\*Migration\) [Up](<https://github.com/leetatech/leeta_golang_libraries/blob/main/mongodb/migration/init.go#L53>)

```go
func (m *Migration) Up(ctx context.Context) error
```

Up imports JSON data files into their corresponding MongoDB collections. For each file\-to\-collection mapping, it checks if the collection already contains data. If the collection is empty, it reads the JSON file and inserts its contents into the collection. Skips collections that already have documents to avoid duplicate imports.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
